配置项
===
### mode
通过选择 development 或 production 之中的一个，来设置 mode 参数，可以启用相应模式下的 webpack 内置的优化。
```
mode: 'development' | 'production'
```
development 优先开发体验：不压缩、易调试、打包快，适合本地开发；
production 优先产物性能：极致压缩、体积小、运行快，适合上线；

开发环境和生产环境也可以分别写config配置文件，不同环境使用不同的配置（plugin，devServe都会不同）。这样，开发和打包分开，各自调用自己的配置文件。
```
// package.json

"scripts": {
    "build": "webpack --config ./webpack.prod.config.json",
    "dev": "webpack serve --config ./webpack.dev.config.json"
},
```

### devtool
出现错误时，需要知道打包前，错误所在的原始位置。使用 source map 功能，将打包后的文件映射到源文件，浏览器读取source map，就可以再devtools内重建源代码进行调试。
1.配置文件内，设置生成map文件
```
devtool: 'source-map'
```
2.打包生成的文件内，使用注释指定这个文件的map
```
//打包后的文件为index.js和index.js.map，手动在index.js尾写入注释：
//# sourceMappingURL=index.js.map
```

###  devServer

#### webpack-dev-server
可以建立本地服务器，基于node.js搭建，内部使用express框架。
```
npm install webpack-dev-server --D
```
更改任何源文件并保存它们，web server 将在编译代码后自动重新加载。启动这个项目需要使用指令：
```
//package.json
"scripts": {
    "serve": "webpack serve" 
}
```
编译结果不会输出到文件，而是保存在内存中。可以通过loaclhost访问。可以添加host属性值为0.0.0.0来支持局域网访问。

```
devServer: {
    open: true, // 自动打开浏览器
    hot: true, //启动热更新，需要HotModuleReplacementPlugin插件
},
```

**proxy**
使用代理可以解决服务器地址跨域。
```
devServer: {
    proxy:{
        "/api": { // 匹配以 /api 开头的请求，进行代理
            target: '后端服务器地址',
            changeOrigin: true, // 必须开启，模拟跨域请求的 Origin
            pathRewrite:{
                "^/api": '' //代理发出的请求中，去掉请求路径中的 /api 前缀
            },
            secure: false  //忽略 SSL 证书验证以支持https
        }
    }
}
```
这样，代码内请求api时，地址就可以使用'/api'来代替了。

**historyApiFallback**
```
devServer: {
    historyApiFallback: true
}

```
当导航使用history模式，页面404时，跳回index.html。