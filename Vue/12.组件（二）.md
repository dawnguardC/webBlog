组件
===================
###父组件与子组件
组件之间可以有嵌套关系，外部组件称为父组件，内部组件称为子组件，父组件嵌套子组件时，需要`components`注册子组件，再使用：

    let child={
        template:'<div>子组件</div>'
    };
    let parent={
        template:'<div><div>父组件</div><child></child></div>',
        components:{
            child:child
        }
    };

    vue.component('child-comp',child);
    vue.component('parent-comp',parent);

###父组件传值-props
props可以给组件实例注册自定义属性。
```
Vue.component('post-data', {
  props: ['title'],
  template: '<h3>111</h3>'
})
```
此时，title就可以作为组件实例的html属性。把数据作为属性值的话，就可以在组件中使用，在组件实例中能得到这个值：
```
<post-data title="想要传递数据"></post-data>

template: '<h3>{{ title }}</h3>'
```
向title传递的数据，可以来自vm的data返回的数据，这样，vm的值就传递到了组件进行使用。例如数据是一个数组：
```
data(){
    return {
        posts: [
          {title: '数据1' },
          {title: '数据2' },
          {title: '数据3' }
        ]
    }    
}
```
则组件可以这样：
```
<post-data v-for="post in posts" v-bind:key="post.index" v-bind:title="post.title"></post-data>
```
任何值都可以传递给任何 prop，所以，可以直接传递posts：
```
Vue.component('post-data', {
  props: ['posts'],
  template: '<h3>{{ posts.title }}</h3>'
})

<post-data v-for="post in posts" v-bind:key="post.index" v-bind:posts="posts"></post-data>
```

props除了数组形式，也可以是对象：
```
props: {
  title: String,
  likes: Number,
  isPublished: Boolean,
  commentIds: Array,
  author: Object,
  callback: Function,
  contactsPromise: Promise // or any other constructor
}
```

###子组件传值-事件
如果组件要把数据传递到vm，就组件通过`$emit()`自定义事件。`$emit("自定义事件名",data)`为组件自定义一个事件，在触发当前实例上的事件时触发，需要绑定在实例methods的具体事件内。
```
Vue.component('post',{
        data(){
            return{
                num:0,
            }
        },
        template:'#example',
        methods:{
            add(){
                this.$emit("postdata",this.num)
            }
        }
    })
```
这样，在组件click时，add()事件就为组件实例自定义了一个postdata事件并触发这个事件，同时将this.num数据传递出来：
```
<template id="example">
    <div>
        <div @click="add">{{num}}</div>
    </div>
</template>
```
再将组件实例触发postdata事件的具体函数绑定到vm的methods方法内：
```
<post @postdata="vmpost"></post>
```
vm的methods方法内，使用vmpost函数接受数据，这个数据将作为函数的参数传递进来：
```
new Vue({
	el:'#app',
	data(){
		return{
			temdata:null
		}
	},
	methods:{
		vmpost(data){
			this.temdata=data
		}
	}
})
```
此时，vm就获取到了组件内的数据。

###`vm.$children/vm.$refs`与`vm.$parent/vm.$root`
Vue还提供了API来获取组件的子组件`vm.$children`/`vm.$refs`和父组件`vm.$parent`。

**`vm.$children和vm.$refs`**
`vm.$children`和`vm.$refs`的不同之处在于，`vm.$children`会直接获取所有的子组件，`vm.$refs`可以用来获取添加ref属性的组件。

    <div id="#app">
        <parent></parent>
        <parent ref="p"></parent>    
    </div>
    
    components:{	
            parent:parent	
        }

    console.log(this.$children)  //[VueComponent, VueComponent]
    console.log(this.$refs.p)    //VueComponent {}

**`vm.$parent`和`vm.$root`** 
`vm.$parent`会获取组件的父组件，`vm.$root`会获取组建的根组件（vm）。

注意，API的方法虽然简洁，但是加深了组件之间的耦合，不利于组件的复用。



