组件
===================
###父组件与子组件
组件之间可以有嵌套关系，外部组件称为父组件，内部组件称为子组件，父组件内需要`components`对子组件进行注册：

    let child={
        template:'<div>子组件</div>'
    };
    let parent={
        template:'<div><div>父组件</div><child></child></div>',
        components:{
            'child':child
        }
    };

    //全局注册父组件
    vue.component('parent-comp',parent);
这里，子组件是父组件的局部注册组件，只能在父组件内使用，如果需要单独使用子组件，还需要另外全局注册子组件。
###父组件传值-props
props可以给组件实例注册自定义属性。
子组件构造器内添加props属性：
```
Vue.component('child-comp', {
  props: ['postdata'],
  template: '<h3>111</h3>'
})
```
此时，postdata字符串就可以作为父组件内的子组件实例的属性。再将父组件的数据作为属性值：
```
<child-comp :postdata="父组件的数据"></child-comp>
```
父组件的数据会储存在postdata内:
```
template: '<h3>{{ postdata }}</h3>'
```
例如父组件的数据是一个数组：
```
<div id="app" v-cloak>
    <parent-comp></parent-comp>
</div>


let childOptions = {
    template:`
        <div>
            // 第三步：使用获取到的值
            <h2 v-for='item in postdata' :key='item.title'>{{item.title}}</h2>
        </div>`,
    // 第一步：注册
    props:['postdata']
}

let parentOptions = {
    template:`
        <div> 
            // 第二步：获取父组件值
            <child-comp :postdata='posts'></child-comp>
        </div>`,
    components:{
        'child-comp': childOptions
    },
    data() {
        return {
            posts: [
                {title: '数据1' },
                {title: '数据2' },
                {title: '数据3' }
            ]
        }
    },
}
Vue.component('parent-comp', parentOptions)

new Vue({
    el:'#app'
})
```
**对象写法**
props也可以是一个对象：
```
props:{
    postdata: Array
}
```
这样做的好处是可以明确传递的数据类型。

###子组件传值-事件
子组件通过`$emit("自定义事件名",要传递的数据)`注册自定义事件：
```
let childOptions = {
    template:`
        <div>
            // 第一步：绑定事件，调用函数
            <h2 @click='senddata'>子组件</h2>
        </div>`,
    props:{
        postdata: Array
    },
    data() {
        return {
            childData: '子组件数据'
        }
    },
    methods: {
        // 第二步： 给子组件实例自定义事件
        senddata(){
            this.$emit('senddata',this.childData)
        }
    },
}
```
子组件触发click事件时，`$emit`为子组件自定义了一个senddata事件,父组件内子组件实例会自动触发该自定义事件，调用父组件methods的函数：
```
let parentOptions = {
    template:`
        <div>
            // 第三步：绑定事件，触发函数
            <child-comp @senddata='getdata'></child-comp>
            <p>{{childrendData}}</p>
        </div>`,
    components:{
        'child-comp': childOptions
    },
    data() {
        return {
            childrendData: null
        }
    },
    methods: {
        getdata(data){
            this.childrendData = data
        }
    },
}
```
###`vm.$children/vm.$refs`与`vm.$parent/vm.$root`
Vue还提供了API来获取组件的子组件`vm.$children`/`vm.$refs`和父组件`vm.$parent`。

**`vm.$children和vm.$refs`**
`vm.$children`和`vm.$refs`的不同之处在于，`vm.$children`会直接获取所有的子组件，`vm.$refs`可以用来获取添加ref属性的组件。

    <div id="#app">
        <parent></parent>
        <parent ref="p"></parent>    
    </div>
    
    components:{	
            parent:parent	
        }

    console.log(this.$children)  //[VueComponent, VueComponent]
    console.log(this.$refs.p)    //VueComponent {}

**`vm.$parent`和`vm.$root`** 
`vm.$parent`会获取组件的父组件，`vm.$root`会获取组建的根组件（vm）。

注意，API的方法虽然简洁，但是加深了组件之间的耦合，不利于组件的复用。



